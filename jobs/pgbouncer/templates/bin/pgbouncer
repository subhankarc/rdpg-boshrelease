#!/var/vcap/packages/bash-4.3/bin/bash

source "$(dirname $(dirname ${0}))/shell/env"

ulimit -v unlimited

action=$1 ; shift 

if [[ -z ${action:-} ]]
then fail "$0 start|reload"
fi

case ${action} in
  (start)
    user exec ${binary} -d "${binaryArgs[@]}"
    ;;
  (reload)
    user exec ${binary} -R "${binaryArgs[@]}" &
    ;;
  (console)
    exec /var/vcap/packages/pgbdr/bin/psql -U ${pgbAdminUser} --host 127.0.0.1 --port ${pgbListenPort} pgbouncer
    ;;
  (*)
    fail "$0 ${action} :: unkown action"
    ;;
esac
