#!/var/vcap/packages/bash-4.3/bin/bash

source "$(dirname $(dirname ${0}))/shell/env"

trap graceful_stop SIGTERM # Handle term signal sent by control script stop action.

initialize_database

configure_pgbdr

ulimit -v unlimited

cat ${storePath}/config/postgresql.conf > ${dataPath}/postgresql.conf
cat ${storePath}/config/pg_hba.conf > ${dataPath}/pg_hba.conf
chmod 0640 ${dataPath}/*.conf

user exec ${binary} start ${binaryArgs[@]} -t 300
